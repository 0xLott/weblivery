<%- include('partials/header') %>

<section id="dashboard">

        <nav class="container">
            <ul>
                <li class="user-name"><h1>Ola, <%= user.name %></h1></li>
                <li class="menu-nav"><i class="fas fa-bars"></i></li>

                <% if (user.email === 'admin') { %>
                    <li class="option-nav">
                        <form class="btn-dash" action="/user/register" method="get">
                            <button class="btn" type="submit">Gerenciar Desenvolvedores</button>
                        </form>
                    </li>
                    
                    <li class="option-nav">
                        <form class="btn-dash" action="/request/view" method="get">
                            <% if (requestAlert) { %>
                            <button class="btn " type="submit"><i class="fa-solid fa-bell"></i> Solicitações</button>
                            <% } else { %>
                                <button class="btn " type="submit">Solicitações</button>
                            <% } %>
                        </form>
                    </li>
                <% } %>

                    <li class="option-nav">
                        <form class="btn-dash" action="/user/notification" method="get">
                            <% if (user.notifications.length == 0) { %>
                            <button class="btn " type="submit">Notificações</button>
                            <% } else { %>
                                <button class="btn " type="submit"><i class="fa-solid fa-bell"></i> Notificações</button>
                            <% } %>
                        </form>
                    </li>

                    <li class="option-nav">
                        <form class="btn-dash" action="/user/quit" method="post">
                            <button class="btn " type="submit">Logout</button>
                        </form>
                    </li>
            </ul>
        </nav> 
            
    <main>

        <h1>Projetos</h1>

        <% projects.slice().reverse().forEach((project)=> { %>

            <% let projectStatus = "Em planejamento" %>
                                        
            <% switch (project.status) {
                case 1 : %>
                    <% projectStatus = "Em andamento" %>
                <% break
                case 2 : %>
                    <% projectStatus = "Concluido" %>
                <% break
            } %>

            <div class="project-box">
                <p><b>Projeto:</b> <%= project.projectName %></p>
                <p><b>Project Owner:</b> <%= project.owner %></p>
                <p><b>Status:</b> <%= projectStatus %></p>

                <form action="/project/<%= project.id %>" method="get">
                    <button class="btn btn-secondary" type="submit">Detalhes</button>
                </form>
                
            </div>
        <% }) %>
        
    </main>

</section>

<%- include('partials/footer') %>